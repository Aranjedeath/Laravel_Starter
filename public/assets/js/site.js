$.ajaxSetup({data:{csrf_token:$('meta[name="csrf-token"]').attr("content")}});

$(document).on('click','a',function(a){if($(this).attr('href')=='#'){return false}});
$(document).on("click",".confirm-ajax-update",function(e){e.preventDefault();var t=$(this).attr("data-table");var n=$(this).attr("data-row");var r=$(this).attr("href");var i=$(this).attr("data-method");var s=$(this).attr("data-type");if(!s)s="json";if(!i)i="POST";bootbox.confirm(lang_areyousure,function(e){if(e){$.ajax({type:i,dataType:s,url:r}).done(function(e){if(s=="json"){if(e.result=="success"){if(n){$("#site-modal").modal("hide");oTable=$("#"+t).dataTable();oTable.fnReloadAjax()}else{$("#site-modal").modal("hide")}}else{console.log(e);bootbox.alert(lang_unable_to_exec+e.error)}}}).fail(function(e,t){console.log(e);bootbox.alert(lang_unable_to_exec+t)})}});return false})
$(document).on("click",".confirm-ajax-noupdate",function(e){e.preventDefault();var t=$(this).attr("href");var n=$(this).attr("data-method");var r=$(this).attr("data-type");if(!r)r="json";if(!n)n="POST";bootbox.confirm(lang_areyousure,function(e){if(e){$.ajax({type:n,dataType:r,url:t}).done(function(e){if(r=="json"){if(e.result=="success"){bootbox.alert(lang_success)}else{console.log(e);bootbox.alert(lang_unable_to_exec+e.error)}}}).fail(function(e,t){console.log(e);bootbox.alert(lang_unable_to_exec+t)})}});return false})
$(document).on('click','.confirm-redirect',function(a){a.preventDefault();bootbox.confirm(lang_areyousure,function(b){if(b){document.location.href=$(this).attr('href')}})});
$(document).on('click','.modalfy',function(a){a.preventDefault();modalfyRun(this,$(this).attr('href'))});
$(document).on('click','.link-through',function(a){window.location=$(this).attr('href')});
$(document).on("submit",".form-ajax",function(e){$("input[type=button], input[type=submit]").attr("disabled",true).addClass("disabled");$.post($(this).attr("action"),$(this).serialize(),function(e){$("#site-modal").html(e);$("html, body, #site-modal").animate({scrollTop:0},0);$("input[type=button], input[type=submit]").attr("disabled",false).removeClass("disabled");});return false})
$(document).on('click','.btn-toggle',function(a){a.preventDefault();$(this).find('.btn').toggleClass('active');if($(this).find('.btn-primary').size()>0){$(this).find('.btn').toggleClass('btn-primary')}if($(this).find('.btn-danger').size()>0){$(this).find('.btn').toggleClass('btn-danger')}if($(this).find('.btn-success').size()>0){$(this).find('.btn').toggleClass('btn-success')}if($(this).find('.btn-info').size()>0){$(this).find('.btn').toggleClass('btn-info')}});

$(function(){if(localStorage.getItem("weather_time")>0&&((new Date).getTime()-localStorage.getItem("weather_time"))/1e3<300){$(".panel-weather").html(localStorage.getItem("weather_html"))}else{$.simpleWeather({location:location,unit:"f",success:function(e){$(".panel-weather").hide();$(".panel-weather").html('<a href="#"><span class=" icon-'+e.code+'"></span> '+e.temp+"&deg; "+e.currently+"</a>");$(".panel-weather").attr("title",e.city+", "+e.region);$(".panel-weather").show();localStorage.setItem("weather_html",$(".panel-weather").html());localStorage.setItem("weather_time",(new Date).getTime())}})}})
function modalfyRun(e,t){$.ajax({type:"GET",url:t}).done(function(e){if(e){$("#site-modal").html(e).modal()}else{console.log(e);bootbox.alert(lang_unable_to_exec)}}).fail(function(e,t){console.log(e);bootbox.alert(lang_unable_to_exec+t)})}
function throttle(b,a){var c=null;return function(){var e=this,d=arguments;clearTimeout(c);c=window.setTimeout(function(){b.apply(e,d)},a||500)}};
function nextTab(a){$(a+' li.active').next().find('a[data-toggle="tab"]').click()}
function prevTab(a){$(a+' li.active').prev().find('a[data-toggle="tab"]').click()};
function loadUserSelect(e,t){if($(e).attr("data-multi")){multi=$(e).attr("data-multi")}else multi=false;if($(e).attr("data-limit")){limit=$(e).attr("data-limit")}else limit=50;if($(e).attr("data-min")){min=$(e).attr("data-min")}else min=3;$(e).select2({placeholder:t,multiple:multi,initSelection:function(e,t){if($(e).val()){$.ajax($(e).attr("data-url"),{data:{id:$(e).val()},dataType:"json"}).done(function(e){t(e)})}},minimumInputLength:min,ajax:{url:$(e).attr("data-url"),dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:limit,page:t}},results:function(e,t){var n=t*limit<e.total;return{results:e.data,more:n}}}})}