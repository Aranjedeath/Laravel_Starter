(function(e){var t={init:function(t){function o(e){localStorage.setItem(settings.page+".grid",e)}function u(t,n){var r={panel:t,state:n};if(localdata_states){e.each(localdata_states,function(e,n){if(n){if(n.panel==t)localdata_states.splice(e,1)}})}else localdata_states=[];localdata_states.push(r);localStorage.setItem(settings.page+".states",JSON.stringify(localdata_states))}function a(t){e("#"+t+"").attr("data-state","max");var n=parseInt(e("#"+t).attr("data-sizey-old"));e("#"+t+"").attr("data-sizey",n);e(".gridster > ul").data("gridster").resize_widget(e("#"+t),e("#"+t).attr("data-sizex"),n);e("#"+t+" .panel").css("padding-bottom","60px");e("#"+t+" .panel-body").slideDown();e("#"+t+" .panel-hide").removeClass("fa-plus").addClass("fa-minus");e("#"+t+" .gs-resize-handle").show();e("#"+t+" .panel-color, #"+t+" .panel-max, #"+t+" .panel-close").show()}function f(t){e("#"+t+"").attr("data-state","min");e("#"+t).attr("data-sizey-old",e("#"+t).attr("data-sizey"));e(".gridster > ul").data("gridster").resize_widget(e("#"+t),e("#"+t).attr("data-sizex"),1);e("#"+t).attr("data-sizey","1");e("#"+t+" .gs-resize-handle").hide();e("#"+t+" .panel-body").slideUp();e("#"+t+" .panel-hide").removeClass("fa-minus").addClass("fa-plus");e("#"+t+" .panel").css("padding-bottom","0px");e("#"+t+" .panel-color, #"+t+" .panel-max, #"+t+" .panel-close").hide()}function l(){var t=2;if(e(window).width()<760)t=1;s.resize_widget_dimensions({widget_base_dimensions:[i*(e(window).width()/i)/n-r,50]})}function c(t,n){var r=e(t).parents("li").attr("id");var i={panel:r,title:n};if(localdata_titles){e.each(localdata_titles,function(e,t){if(t){if(t.panel==r)localdata_titles.splice(e,1)}})}else localdata_titles=[];localdata_titles.push(i);localStorage.setItem(settings.page+".titles",JSON.stringify(localdata_titles))}function h(t,n){e("#"+t+" .panel-heading").css("background-color",n);var r={panel:t,color:n};if(localdata_colors){e.each(localdata_colors,function(e,n){if(n){if(n.panel==t)localdata_colors.splice(e,1)}})}else localdata_colors=[];localdata_colors.push(r);localStorage.setItem(settings.page+".colors",JSON.stringify(localdata_colors))}settings=e.extend({page:"dashboard"},t);localdata_position=JSON.parse(localStorage.getItem(settings.page+".grid"));localdata_colors=JSON.parse(localStorage.getItem(settings.page+".colors"));localdata_states=JSON.parse(localStorage.getItem(settings.page+".states"));localdata_titles=JSON.parse(localStorage.getItem(settings.page+".titles"));if(localdata_position){e.each(localdata_position,function(t,n){e("#"+n.id).attr({"data-col":n.col,"data-row":n.row,"data-sizex":n.size_x,"data-sizey":n.size_y})})}if(localdata_titles){e.each(localdata_titles,function(t,n){if(n){if(n.title)e("#"+n.panel+" .panel-title-text").html(n.title)}})}if(e(window).width()<=480||e(window).width()==640){var n=1;var r=40}else{var n=2;var r=20}var i=e(window).width()/n-r;var s=e(".gridster > ul").gridster({extra_cols:1,autogrow_cols:true,min_cols:1,max_cols:n,widget_margins:[5,5],widget_base_dimensions:[i,50],resize:{enabled:true,stop:function(e,t,n){o(JSON.stringify(this.serialize()))}},serialize_params:function(t,n){return{id:e(t).attr("id"),col:n.col,row:n.row,size_x:n.size_x,size_y:n.size_y}},draggable:{handle:".panel-heading, .panel-handel",stop:function(t,n){var r=this.serialize();e.each(r,function(t,n){_state=e("#"+n.id).attr("data-state");if(_state=="min"){n.size_y=e("#"+n.id).attr("data-sizey-old");r[t]=n}});o(JSON.stringify(r))}}}).data("gridster");e(".colorselector").colorselector({callback:function(e,t,n,r){h(e,n)}});if(localdata_colors){e.each(localdata_colors,function(t,n){if(n)e("#"+n.panel+" .panel-heading, #"+n.panel+" .btn-colorselector").css("background-color",n.color)})}if(localdata_states){e.each(localdata_states,function(t,n){if(n){if(n.state=="closed"){e(".gridster > ul").data("gridster").remove_widget(e("#"+n.panel))}else if(n.state==false)f(n.panel)}})}e(document).on("click",".panel-hide",function(t){t.preventDefault();var n=e(this).attr("data-id");if(e(this).hasClass("fa-minus")){f(n);var r=false}else{a(n);var r=true}u(n,r)});e(document).on("click",".panel-max",function(t){t.preventDefault();var n=e(this).attr("data-id");if(e(this).hasClass("fa-compress")){e(".main-nav").show();e("#"+n).find(".hide-full").show();e("#"+n+" .gs-resize-handle").hide();e("#"+n).css({position:"absolute",top:e("#"+n).attr("data-top"),left:e("#"+n).attr("data-left"),width:e("#"+n).attr("data-width"),height:"calc(auto + 6px)","z-index":"0"});e(this).removeClass("fa-compress").addClass("fa-expand")}else{e(".main-nav").hide();var r=e("#"+n).position();e("#"+n).attr({"data-width":e("#"+n).width(),"data-height":e("#"+n).height(),"data-left":r.left,"data-top":r.top});e("#"+n).css({position:"fixed",top:"0",left:"0",width:"100%",height:"100%","z-index":"1049"});e(this).removeClass("fa-expand").addClass("fa-compress");e("#"+n+" .gs-resize-handle").show();e("#"+n).find(".hide-full").hide()}});e(document).on("click",".panel-close",function(t){t.preventDefault();var n=e(this).attr("data-id");bootbox.confirm("Are you sure?",function(t){if(t){e(".gridster > ul").data("gridster").remove_widget(e("#"+n));u(n,"closed")}})});e(".panel-title-text").editable({mode:"inline",showbuttons:"false",placeholder:"Title",success:function(e,t){c(this,t)}});e(window).bind("load resize.gridster-draggable",throttle(l,200));if(e(window).width()<760&&!localdata_states){e("#widget-usersonline,#widget-features, #widiget-todo, #widget-graph").each(function(){f(e(this).attr("id"));u(e(this).attr("id"),false)})}}};e.fn.gridster.responsive=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.gridster.responsive")}}})(jQuery)